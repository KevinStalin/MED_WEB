{{> header }}
{{> head }}

<style type="text/css">
    body,
    html {

        height: 100%;
        background-repeat: no-repeat;
        background: url(assets/img/web2.jpg) no-repeat center center fixed;
        background-size: 100% 100%;
        opacity: 5;
        filter: alpha(opacity=1);
    }
</style>

<body>
    <br><br><br><br><br><br>
    <center>
    <h1 class="mb-3"> Registro</h1>
    </center>


    <!-- Slide 1 -->

    <center>
        <div class="container">
            {{!-- <div class="py-5 text-center">
                            <img class="d-block mx-auto mb-4" src="/docs/4.5/assets/brand/bootstrap-solid.svg" alt=""
                                width="72" height="72">
                            <h2>Checkout form</h2>
                            <p class="lead">Below is an example form built entirely with Bootstrapâ€™s form controls. Each
                                required form group has a validation state that can be triggered by attempting to submit
                                the form without completing it.</p>
                        </div> --}}

            <div class="col-md-8 order-md-1">
                <br>
                <form class="needs-validation" novalidate id="create-registro">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstName"><b>Nombre</b></label>
                            <input id="nombre" type="text" class="form-control" placeholder="" value="" required>
                            <div class="invalid-feedback">
                                Este campo es obligatorio.
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="lastName"><b>Apellido</b></label>
                            <input id="apellido" type="text" class="form-control" placeholder="" value="" required>
                            <div class="invalid-feedback">
                                Este campo es obligatorio.
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="lastName"><b>Cedula</b></label>
                        <input id="cedula" type="text" class="form-control" placeholder="" value="" required>
                        <div class="invalid-feedback">
                            Este campo es obligatorio.
                        </div>
                    </div>
                    <div class=" mb-3">
                        <div class="col-md-5 mb-3">
                            <label for="country"><b>Tipo de Usuario</b></label>
                            <select id="perfil" class="custom-select d-block w-100" required>
                                <option value="USER_PACIENTE"><b>Paciente</b></option>
                                <option value="USER_MEDICO"><b>Medico</b></option>
                            </select>
                            <div class="invalid-feedback">
                                Seleccione un usuario.
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName"><b>Identificacion</b></label>
                        <input id="identificacion" type="text" class="form-control" placeholder="" value="" required>
                        <div class="invalid-feedback">
                            Este campo es obligatorio.
                        </div>
                    </div>



                    <div class="col-md-6 mb-3">
                        <label for="email"><b>Email</b> </label>
                        <input id="correo" type="email" class="form-control" placeholder="you@example.com" value=""
                            required>
                        <div class="invalid-feedback">
                            Este campo es obligatorio.
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="address2"><b>Contrasenia</b> </label>
                        <input id="contrasenia" type="password" class="form-control" placeholder="password" value=""
                            required>
                    </div>


                    <div class="col-md-6 mb-3">
                        <hr class="col-md-6 mb-3">
                        <button class="btn btn-lg btn-primary btn-lg">Registrarse</button>



                    </div>
                </form>
                <button class="btn btn-lg btn-primary btn-lg" onclick="window.location='/logeo'">Iniciar
                    sesion</button>
            </div>

        </div>

        </div>
        </div>
    </center>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        $(function () {
            $('#create-registro').on('submit', function (event) {
                event.preventDefault();
                var nombre = $('#nombre');
                var apellido = $('#apellido');
                var cedula = $('#cedula');
                var identificacion = $('#identificacion');
                var perfil = $('#perfil');
                var correo = $('#correo');
                var contrasenia = $('#contrasenia');
                $.ajax({
                    url: '/registro',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        nombre: nombre.val(),
                        apellido: apellido.val(),
                        cedula: cedula.val(),
                        identificacion: identificacion.val(),
                        perfil: perfil.val(),
                        correo: correo.val(),
                        contrasenia: contrasenia.val()
                    }),
                    success: function (response) {
                        console.log(response);

                        //alert(`Usuario ${response.usuario.nombre} Registro existoso `);
                        var con = confirm(`Usuario ${response.usuario.nombre} Registrado exitosamente, \n Te gustaria logearte ?`);
                        if (con) {
                            window.location = "/logeo"
                        } else {
                            window.location = "/registro"
                        }
                    }
                });
            });

        });
    </script>

</body>
<br><br>
{{> footer }}