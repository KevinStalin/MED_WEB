{{> header }}
{{> headMed }}
<style type="text/css">
    body,
    html {

        height: 100%;
        background-repeat: no-repeat;
        background: url(assets/img/fondo3.jpg) no-repeat center center fixed;
        background-size: 100% 100%;
        opacity: 5;
        filter: alpha(opacity=1);
    }
</style>

<br><br><br><br><br><br><br>
<center>
    <h1>TRATAMIENTO</h1>
</center>
<hr>
<br><br><br>

<h1 style="position: absolute; top: 250px; left:25px;">Síntomas</h1>

<div style="position: absolute; top: 325px; left:25px;">
    <select id="sintomas" name="transporte" size="2" style="
            width : 400px;
            height : 300px;
            overflow : auto;">
       
    </select>

</div>

<div style="position: absolute; top: 250px; right:100px;">
    <h1>Información recomendada</h1>
    <!--<textarea name="comentarios" rows="14" cols="100"></textarea>-->
    <blockquote id="recipiente"></blockquote>

</div>
<h1 style="position: absolute; top: 250px; left:600px;">Síntomas elegidos</h1>
<div style="position: absolute; top: 325px; left:500px;">
    <select id="seleccionados" name="transporte" size="2" style="
            width : 500px;
            height : 150px;
            overflow : auto;">
    </select>
    <br><br><br>
    <center>
        <br><br>
        <form id="respuesta">
            <button type="submit" class="btn btn-primary">Consultar</button>
        </form>

        {{!-- <button type="button" class="btn btn-primary">Salir</button> --}}
    </center>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    $(() => {
        var id = []
        $.ajax({
            url: '/respuestaSintoma',
            contentType: 'application/json',
            success: (response) => {
                let cont_sintomas = $('#sintomas');
                response.sintomas.forEach((sintoma) => {
                    cont_sintomas.append('<option value="' + sintoma._id + '" selected="selected" >' + sintoma.descripcion + '</option>');
                });
            }
        });
        $('#sintomas').on('click', (event) => {
            event.preventDefault();
            let selecionado = $("#sintomas option:selected").text();
            let id_seleccionado = $('#sintomas').val();
            //console.log(selecionado);
            //console.log(id_seleccionado);
            id.push(id_seleccionado);
            $('#seleccionados').append('<option value="' + id_seleccionado + '" selected="selected">' + selecionado + '</option>');
        });
        $('#seleccionados').on('click', (event) => {
            event.preventDefault();
            //var selecionado = $("#seleccionados option:selected").text();
            let id_seleccionado = $('#seleccionados').val();
            console.log(id_seleccionado);
            let i = id.indexOf(id_seleccionado);
            id.splice(i, 1);
            $('#seleccionados option:selected').remove();
        });
        console.log("id:", id)
        $('#respuesta').on('submit', (event) => {
            event.preventDefault();
            $.ajax({
                url: '/responder',
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ sintomas: id }),
                success: (respuesta) => {
                    let recipiente = $('#recipiente');
                    recipiente.append('<p>' + respuesta + '</p>');
                }
            });
        });


    });

</script>

{{> footer }}